(this.webpackJsonpcryptocharity=this.webpackJsonpcryptocharity||[]).push([[0],{337:function(e,t){},362:function(e,t){},364:function(e,t){},443:function(e,t){},445:function(e,t){},477:function(e,t){},482:function(e,t){},484:function(e,t){},491:function(e,t){},504:function(e,t){},527:function(e,t){},605:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(25),s=n.n(r),c=n(11),o=n(15),l=n(134),u=n(21),d=n(20),p=n(657),m=n(288),b=n.n(m),h=n(182),j=n.n(h),f={address:"0x34b41A8f1b89e94F9E50283DD9F3a296C620E2fA",abi:[{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"TimestampEST",type:"bytes"},{indexed:!1,internalType:"address",name:"From",type:"address"},{indexed:!1,internalType:"address",name:"To",type:"address"},{indexed:!1,internalType:"uint256",name:"Continent",type:"uint256"},{indexed:!1,internalType:"uint256",name:"Value",type:"uint256"},{indexed:!1,internalType:"bytes",name:"Memo",type:"bytes"},{indexed:!1,internalType:"bytes",name:"TxnHash",type:"bytes"}],name:"trans",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"bals",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"time",type:"string"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"cont",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"string",name:"memo",type:"string"},{internalType:"string",name:"hash",type:"string"}],name:"give",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"time",type:"string"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"cont",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"string",name:"memo",type:"string"},{internalType:"string",name:"hash",type:"string"}],name:"take",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},y={omdb:"14f8eef1",truffle:"8f7572d1-e253-420a-93bc-2ed8a6f051e6"},x=n(290),O=n(183),g=n(611),v=n(181),T=n(286),C=n(13),w=Object(T.a)((function(e){return{root:{margin:e.spacing(3),"& .charity":{backgroundColor:"red"}}}})),A=("id TimestampEST From To Continent Value Memo TxnHash".split(" "),122),F=function(e){return Object(C.jsx)(O.a,{title:e.value,children:Object(C.jsx)(g.a,{variant:"body2",children:e.value})})},k=[{field:"id",type:"number"},{field:"TimestampEST",width:A,renderCell:F},{field:"From",width:A,renderCell:F},{field:"To",renderCell:F},{field:"Continent",width:A},{field:"Value",type:"number",width:A},{field:"Memo",width:A},{field:"TxnHash",width:A,renderCell:F}];function S(e){var t=e.rows,n=w(),a={rows:t,columns:k,autoHeight:!0,pageSize:5,getCellClassName:function(e){return"From"===e.field&&"0x596Aa50158BFf76F8D08F848d701C83a4F754d9c"===e.value?"charity":""},sortModel:[{field:"id",sort:"desc"}],className:n.root,loading:!t.length};return Object(C.jsx)(v.a,Object(x.a)({},a))}var E=n(658),N=n(185),M=n(187),B=n(55),D=n(84),H=n(6),V=n.p+"static/media/logo.bd51f56a.png",G=["Asia","Africa","North America","South America","Antarctica","Europe","Australia"],I="0x61eB15d8A761Fc80387F50d84Fbf7Ff47a97d92F",J="0x596Aa50158BFf76F8D08F848d701C83a4F754d9c",U="0xAf951AE00Ab357b8a2cFa66901E0D4D0F96e397B",W=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).send=function(e){return"User"===a.state.agent?a.donate():a.spend()},a.state={agent:null,continent:null,value:0,memo:""},a}return Object(o.a)(n,[{key:"donate",value:function(){var e=this;this.props.web3.eth.sendTransaction({from:I,to:J,value:this.state.value}).on("transactionHash",(function(t){e.props.myContract.methods.give((new Date).toISOString(),J,e.state.continent,e.state.value,"",t).send({from:I})}))}},{key:"spend",value:function(){var e=this;this.props.web3.eth.sendTransaction({from:J,to:U,value:this.state.value}).on("transactionHash",(function(t){e.props.myContract.methods.take((new Date).toISOString(),U,e.state.continent,e.state.value,e.state.memo,t).send({from:J})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(C.jsxs)(E.a,{container:!0,spacing:1,className:t.root,children:[Object(C.jsx)(E.a,{item:!0,xs:1,children:Object(C.jsx)("img",{src:V,width:"99%"})}),Object(C.jsx)(E.a,{item:!0,xs:1,children:Object(C.jsx)(N.a,{className:t.paper,children:Object(C.jsx)(g.a,{variant:"h4",children:"Form"})})}),Object(C.jsx)(E.a,{item:!0,xs:!0,children:Object(C.jsx)(N.a,{className:t.paper,children:Object(C.jsx)(M.a,{label:"Agent",select:!0,onChange:function(t){return e.setState({agent:t.target.value})},children:"User Charity".split(" ").map((function(e){return Object(C.jsx)(B.a,{value:e,children:e})}))})})}),Object(C.jsx)(E.a,{item:!0,xs:!0,children:Object(C.jsx)(N.a,{className:t.paper,children:Object(C.jsx)(M.a,{label:"Continent",select:!0,onChange:function(t){return e.setState({continent:t.target.value})},children:G.map((function(e,t){return Object(C.jsx)(B.a,{value:t,children:e})}))})})}),Object(C.jsx)(E.a,{item:!0,xs:!0,children:Object(C.jsx)(N.a,{className:t.paper,children:Object(C.jsx)(M.a,{label:"Amount",type:"number",onChange:function(t){return e.setState({value:t.target.value})}})})}),Object(C.jsx)(E.a,{item:!0,xs:!0,children:Object(C.jsx)(N.a,{className:t.paper,children:Object(C.jsx)(M.a,{label:"Memo (only for Charity)",onChange:function(t){return e.setState({memo:t.target.value})}})})}),Object(C.jsx)(E.a,{item:!0,xs:1,children:Object(C.jsx)("div",{className:t.paper,children:Object(C.jsx)(D.a,{variant:"contained",color:"primary",onClick:this.send,children:"Submit"})})})]})}}]),n}(i.a.Component),z=Object(H.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"}}}))(W),K=n(9),P=n(659),_=n(102),q=n(296),L=n(660),Q=n(661),R=Object(T.a)((function(e){return{root:{flexGrow:1},menuButton:{margin:e.spacing(2)},title:{flexGrow:1}}}));function X(e){var t=R(),n=i.a.useState(null),a=Object(K.a)(n,2),r=a[0],s=a[1],c=function(){s(null)};return Object(C.jsx)("div",{className:t.root,children:Object(C.jsx)(P.a,{children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)(_.a,{color:"inherit",href:"https://georgefane.github.io/",children:Object(C.jsx)(L.a,{})}),Object(C.jsx)(g.a,{variant:"h6",className:t.title,children:"CryptoCharity"}),Object(C.jsx)(g.a,{className:t.title,children:"Alex Beloiu, George Fane, Abbas Kagal, Will Wang"}),Object(C.jsx)(D.a,{onClick:function(e){s(e.currentTarget)},color:"inherit",children:"Balances"}),Object(C.jsx)(q.a,{anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:c,children:e.bals.map((function(e){var t=Object(K.a)(e,2),n=t[0],a=t[1];return Object(C.jsxs)(B.a,{onClick:c,children:[n,": ",a]})}))}),Object(C.jsx)(_.a,{color:"inherit",href:"https://github.com/GeorgeFane/cryptocharity",target:"_blank",children:Object(C.jsx)(Q.a,{})})]})})})}var Y="https://sandbox.truffleteams.com/"+y.truffle,Z=new b.a(Y),$=new Z.eth.Contract(f.abi,f.address),ee=["Asia","Africa","NorthAmerica","SouthAmerica","Antarctica","Europe","Australia"],te=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={rows:[],bals:{}},e.getEvents=e.getEvents.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"getEvents",value:function(e,t){var n=t.map((function(e){return e.returnValues}));n.forEach((function(e,t){e.id=t,e.TimestampEST=j()(e.TimestampEST),e.Memo=j()(e.Memo),e.Value=Number(e.Value),e.Continent=ee[e.Continent]})),this.setState({rows:n}),console.log(n)}},{key:"load",value:function(){$.getPastEvents("trans",{fromBlock:0,toBlock:"latest"},this.getEvents)}},{key:"componentDidMount",value:function(){var e=this;this.load(),ee.map((function(t,n){$.methods.bals(n).call((function(n,a){return e.state.bals[t]=a}))}))}},{key:"render",value:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)(X,{bals:Object.entries(this.state.bals)}),Object(C.jsx)(p.a,{}),Object(C.jsx)(z,{web3:Z,myContract:$}),Object(C.jsx)(S,{rows:this.state.rows})]})}}]),n}(i.a.Component);s.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(te,{})}),document.getElementById("root"))}},[[605,1,2]]]);
//# sourceMappingURL=main.9ac7c520.chunk.js.map